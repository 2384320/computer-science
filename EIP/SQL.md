# SQL (Structural Query Language) 

> 관계형 데이터베이스를 지원하는 언어
> 
> 원하는 정보가 무엇인지, 그것을 어떻게 유도하는지 기술하는 언어(관계대수) + 원하는 정보가 무엇인지만 정의하는 비 절차적 언어(관계해석)

## SQL의 용도에 따른 정의

- **DDL(Data Definition Language)**: 정의어 | 테이블, 제약사항, 도메인 등을 정의(Create), 변경(Alter), 삭제(Drop)하는 언어
- **DML(Data Management Language)**: 조작어 | DB 사용자와 DBMS 간의 인터페이스를 제공하며 DB를 실질적으로 처리하는 언어
  - 검색(Select), 삽입(Insert), 삭제(Delete), 변경(Update) 등
- **DCL(Data Control Language)**: 제어어 | DB를 관리할 목적으로 사용하는 언어이며 TCL 명령어를 수행함.

---

\***TCL(Transaction Control Language)**: 트랜잭션 제어어 | 여러 종류의 데이터를 출력하는 과정인 트랜잭션을 제어하기 위해 사용하는 언어
- **Commit**: 명령에 의해 수행된 결과를 실제 물리적 디스크로 저장하고 정상적으로 작업이 완료되었음을 관리자에게 알려줌.
- **Rollback**: DB 조작 작업이 비정상적으로 종료되었을 때 원래의 상태로 복구함.
- **Savepoint**: 트랜잭션 내에 Rollback할 위치(저장점)를 지정하는 명령어
- **Revoke**: DB 사용자에게 권한 취소
- **Grant**: DB 사용자에게 권한 부여

# 절차형 SQL

> 단순 트랜잭션에서 좀 더 발전하여 반복, 분기 등의 제어가 가능한 모듈화된(재사용가능한) SQL

- 언어 효율은 떨어지지만 단일 SQL 문장으로 처리하기 어려운 연속작업을 처리하기 적합함.
- DBMS 엔진에서 직접 실행되므로 입출력 패킷이 적지만 속도는 느린 편
- Declare-Begin-End 형식으로 작성되는 블록(Block) 구조로 되어 있기 때문에 기능별 모듈화가 가능함.

## 프로시저 (Procedure)

- 주로 DML을 사용해서 주기적으로 실행하는 작업 진행(매출마감/일괄작업 등)
- 트랜잭션 영역이 마지막에 사용되어 처리 결과를 반환하지 않거나 한 개 이상의 값을 반환하며 작업 결과를 데이터베이스에 저장함.
- 반환 값은 여러 개로 나와도 되지만, 함수는 오직 하나의 값만 있어야 함.

## 사용자 정의 함수 (User-Defined Function)

- 작업의 결과물을 호출한 쿼리문에 돌려줌.
- 반드시 반환 값이 있어야 함.
- 주로 DML 문장 내부에서 호출됨.

---
\*프로시저 vs 사용자 정의 함수

|프로시저|사용자 정의 함수|
|:---:|:---:|
|업무를 맡기는 목적|로직을 도와주는 목적|
|트랜잭션을 사용할 수 있음|트랜잭션을 사용할 수 없음|
|파라미터 형식이 입, 출력임|입력 파라미터만 가능|
|SELECT, WHERE, HAVING 절에 프로시저 사용 불가|SELECT, WHERE, HAVING 절에 사용자 정의 함수 사용 가능|

## 트리거 (Trigger)

- 삽입, 삭제, 수정 등으로 DB에 특정 변화가 발생하는 경우에 자동으로 실행됨.
- 무결성 유지 및 로그 저장에 사용됨.
- 자동 실행 → 반환 값이나 매개변수 존재 X, Commit 및 Rollback 존재 X (오류에 취약)

# 참고 자료

- [\[2021 정보처리기사 필기\] 절차형 SQL의 개요와 특징](https://y-oni.tistory.com/entry/2021-%EC%A0%95%EB%B3%B4%EC%B2%98%EB%A6%AC%EA%B8%B0%EC%82%AC-%ED%82%A4%EC%9B%8C%EB%93%9C-%EC%A0%95%EB%A6%AC2%EA%B3%BC%EB%AA%A9-%EC%A0%88%EC%B0%A8%ED%98%95-SQL-%ED%94%84%EB%A1%9C%EC%8B%9C%EC%A0%80-%EC%82%AC%EC%9A%A9%EC%9E%90%EC%A0%95%EC%9D%98%ED%95%A8%EC%88%98-%ED%8A%B8%EB%A6%AC%EA%B1%B0%EC%9D%98-%EC%B0%A8%EC%9D%B4?category=934883#top)
